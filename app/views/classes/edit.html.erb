<div class="span4">

  <div class="box_l1_ep">
    <% if @user.role == 'student' %>
      <%= @user.avatar.present? ? image_tag(@user.avatar.url(:original),:height => '50px', :width => '50px' , :class => "profile_pic img-rounded") : image_tag("/assets/profile_pic_student.png",:height => '50px', :width => '50px' , :class => "profile_pic img-rounded") %>
    <% else %>
      <%= @user.avatar.present? ? image_tag(@user.avatar.url(:original),:height => '50px', :width => '50px' , :class => "profile_pic img-rounded") : image_tag("/assets/profile_pic_instructor.png",:height => '50px', :width => '50px' , :class => "profile_pic img-rounded") %>
    <% end %>
    <h3 class="profile_name"><%= @user.fullname %></h3>
    <%= link_to "View my class page", class_path(@user), :class => "view_my_profile_page" %>
  </div>


  <div class="box_l1_hp">
    <%= link_to "<button class='side_nav_button profile active_button' type=button'>Class<img class='arrow' src='/assets/arrow.png' height='10px' width='10px'></button>".html_safe, edit_class_path(@user) %>
    <%= link_to "<button class='side_nav_button posts for_notifications' type=button'>Roster<img class='arrow' src='/assets/arrow.png' height='10px' width='10px'></button>".html_safe, roster_class_path(@user) %>
    <%= link_to "<button class='side_nav_button posts for_notifications' type=button'>Invite Students<img class='arrow' src='/assets/arrow.png' height='10px' width='10px'></button>".html_safe, invite_students_class_path(@user) %>
    <%= link_to "<button class='side_nav_button posts for_notifications' type=button'>FAQ's<img class='arrow' src='/assets/arrow.png' height='10px' width='10px'></button>".html_safe, faqs_class_path %>
    <%= link_to "<button class='side_nav_button posts for_notifications' type=button'>Readings<img class='arrow' src='/assets/arrow.png' height='10px' width='10px'></button>".html_safe, readings_class_path(@user) %>
    <%= link_to "<button class='side_nav_button password' type=button'>Important Links<img class='arrow' src='/assets/arrow.png' height='10px' width='10px'></button>".html_safe, importent_links_class_path %>
  </div>

  <div class="box_l3_hp">
    <div class="link_box">
      &#169; &nbsp 2012 &nbsp EduPosts &nbsp More links go here
    </div>
  </div>
</div>

<div class="span8">
  <div class="box_r1_ep">
    <h2 class="posts_title">Class</h2>
    <div class="profile_note">This information appears on your public profile, search results, and beyond.</div>
    <div class="edit_profile_right_column">
      <%= form_for(@user, :url => class_path(@user)) do |f| %>
        <table width="100%" cellpadding="20%">
          <tr>
            <td><%= f.label :avatar, "Photo" %></td>
            <td>
              <% if @user.role == 'student' %>
                <%= @user.avatar.present? ? image_tag(@user.avatar.url(:original),:height => '100px', :width => '100px' , :id => 'user_photo') : image_tag("/assets/profile_pic_student.png",:height => '100px', :width => '100px', :id => 'user_photo') %>
              <% else %>
                <%= @user.avatar.present? ? image_tag(@user.avatar.url(:original),:height => '100px', :width => '100px', :id => 'user_photo') : image_tag("/assets/profile_pic_instructor.png",:height => '100px', :width => '100px', :id => 'user_photo') %>
              <% end %>
              <img id="PreviewImage1" src="" alt=""  />
              <div class="input-container btn">Change photo<span class="caret"></span>
                <%= f.file_field :avatar, :id => "realupload11", :onChange => 'readURL(this)', :style => 'margin-left: -119px;margin-top: -5px;width: 116px;'%>
              </div>
              <br/>
              <div class="change_photo_box_text" style="position:relative;left: 75px;">
                This photo is your identity on Eduposts and appears with your posts.Need help? <a href=#">Learn More</a>
              </div>
            </td>
            <td><%= validation_error(@user.errors["avatar"]) %></td>
          </tr>

          <tr>
            <td><%= f.label :username, "Classname" %></td>
            <td><%= f.text_field :username, :value => @user.username.split('@').last,:onBlur => "get_username(this)" %></td>
            <td id="username_error" style="text-transform: none;font-family: Calibri-Bold;font-size:12px;width:300px;position: relative;top: 10px;float: left;">
              <%= validation_error(@user.errors["username"]) %></td>
          </tr>
          <tr>
            <td><%= f.label :email, "Instructor's Email" %></td>
            <td><%= f.email_field :email, :readonly => true %></td>
            <td> <%= validation_error(@user.errors["email"]) %></td>
          </tr>
          <tr>
            <td> <%= f.label :state, "From" %></td>
            <td> <%= f.text_field :state %></td>
          </tr>
          <tr>
            <td> <%= f.label :major, "Major" %></td>
            <td> <%= f.text_field :major %></td>
          </tr>
          <tr>
            <td><%= f.label :bio, "Bio" %></td>
            <td><%= f.text_area :bio, :rows => 3 %></td>
          </tr>

          <tr>
            <td><%= f.label :website, "Website" %></td>
            <td><%= f.text_field :website %></td>
          </tr>
          <tr>
            <td></td>
            <td><button type="submit" class="btn btn-info">Save Changes</button></td>
          </tr>
        </table>
      <% end %>
    </div>
  </div>
</div>
<style>
  .form_error{
    left: -36px;
    position: relative;
    top: -6px;
    width: 317px;
  }
</style>
<script>
  function readURL(input) {
    if (input.files && input.files[0]) {//Check if input has files.
      var reader = new FileReader();//Initialize FileReader.

      reader.onload = function (e) {
        $('#PreviewImage1').attr('src', e.target.result);
        $('#PreviewImage1').show();
        $("#user_photo").hide();
      };
      reader.readAsDataURL(input.files[0]);
    }
  }
</script>
